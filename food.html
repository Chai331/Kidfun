<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Session 2</title>
<style>
body{
  margin:0;background:#AEE6FF;font-family:Segoe UI;
  display:flex;align-items:center;justify-content:center;height:100vh;
}
.box{
  background:white;width:620px;padding:40px;border-radius:28px;
  box-shadow:0 14px 0 rgba(0,0,0,.25);text-align:center;position:relative;
}
.item{
  margin:18px auto;width:260px;padding:22px;background:#FFE082;
  border-radius:16px;font-size:46px;cursor:pointer;
  box-shadow:0 6px 0 rgba(0,0,0,.25);
}
.bigStar{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-size:140px;animation:pop .8s ease-out forwards;
}
@keyframes pop{from{transform:scale(.2);opacity:0}to{transform:scale(1.4);opacity:1}}
.progress{position:absolute;top:16px;right:16px;font-weight:700;}
.sessionTitle{position:absolute;top:-40px;font-size:22px;font-weight:900;}
</style>
</head>

<body>
<div class="box">
<div class="sessionTitle">SESSION 2</div>
<div class="progress" id="prog">0 / 3</div>
<div id="animal" style="font-size:120px"></div>
<div id="foods"></div>
</div>

<script>
const ok=new Audio("correct.mp3");
const no=new Audio("wrong.mp3");

const data=[
 {a:"ğŸµ",f:"ğŸŒ"},
 {a:"ğŸ®",f:"ğŸŒ¿"},
 {a:"ğŸ¦†",f:"ğŸª±"}
];

const pool=["ğŸ","ğŸ¥•","ğŸŸ","ğŸ","ğŸ§€"];

let q=0,perfect=0,firstTry=true;

function load(){
  firstTry=true;
  prog.innerText=`${q}/3`;
  animal.innerText=data[q].a;

  let opts=[data[q].f];
  while(opts.length<3){
    let r=pool[Math.floor(Math.random()*pool.length)];
    if(!opts.includes(r)) opts.push(r);
  }
  opts.sort(()=>Math.random()-0.5);

  foods.innerHTML="";
  opts.forEach(o=>{
    let b=document.createElement("div");
    b.className="item";
    b.innerText=o;
    b.onclick=()=>check(b,o);
    foods.appendChild(b);
  });
}

function check(btn,a){
  if(a==data[q].f){
    ok.play();
    btn.style.background="#4CAF50";
    if(firstTry) perfect++;
    setTimeout(next,700);
  }else{
    no.play();
    btn.style.background="#FF6B6B";
    firstTry=false;
  }
}

function next(){
  q++;
  if(q==3){
    if(perfect==3){
      document.querySelector(".box").innerHTML+="<div class='bigStar'>ğŸŒŸ</div>";
      localStorage.star2=1;
    }else localStorage.star2=0;
    setTimeout(()=>location.href="sound.html",1400);
  }else load();
}
load();
</script>
</body>
</html>
